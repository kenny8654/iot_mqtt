<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<!--[if lte IE 8]><script language="javascript" type="text/javascript" src="http://static.pureexample.com/js/flot/excanvas.min.js"></script><![endif]-->
<script type="text/javascript" src="http://static.pureexample.com/js/flot/jquery.flot.min.js"></script>
<script type="text/javascript" src="http://static.pureexample.com/js/flot/jquery.flot.time.js"></script>    
<script type="text/javascript" src="http://static.pureexample.com/js/flot/jquery.flot.axislabels.js"></script>

<!-- CSS -->
<style type="text/css">
#flotcontainer {
    width: 600px;
    height: 200px;
    text-align: center;
    margin: 0 auto;
    background-color: #FFF;
}
#flotcontainer2 {
    width: 600px;
    height: 200px;
    text-align: center;
    margin: 0 auto;
    background-color: #FFF;
}
h1{
    text-align: center;
    background-color: #FFF;
}
body {
    background-image: url(./bg.png);;
}
</style>

<!-- Javascript -->
<script>
var data = [];
data[0] = [];
data[1] = [];
var dataset;
var totalPoints = 50;
var updateInterval = 3000;
var now = new Date().getTime();
var now2 = new Date().getTime();

function GetData() {
    //console.log(data)
    
    data[0].shift();
    while (data[0].length < totalPoints) {     
        var y = Math.random() * 100;
        var temp = [now += updateInterval, y];

        data[0].push(temp);
    }
    
    
    data[1].shift();
    while (data[1].length < totalPoints) {     
        var y = Math.random() * 100;
        var temp = [now2 += updateInterval, y];

        data[1].push(temp);
    }
    console.log(data[0]);
}

var options = {
    series: {
        lines: {
            show: true,
            lineWidth: 1.2,
            fill: true
        }
    },
    xaxis: {
        mode: "time",
        tickSize: [2, "second"],
        tickFormatter: function (v, axis) {
            var date = new Date(v);

            if (date.getSeconds() % 20 == 0) {
                var hours = date.getHours() < 10 ? "0" + date.getHours() : date.getHours();
                var minutes = date.getMinutes() < 10 ? "0" + date.getMinutes() : date.getMinutes();
                var seconds = date.getSeconds() < 10 ? "0" + date.getSeconds() : date.getSeconds();

                return hours + ":" + minutes + ":" + seconds;
            } else {
                return "";
            }
        },
        axisLabel: "Time",
        axisLabelUseCanvas: true,
        axisLabelFontSizePixels: 12,
        axisLabelFontFamily: 'Verdana, Arial',
        axisLabelPadding: 10
    },
    yaxis: {
        min: 0,
        max: 100,        
        tickSize: 5,
        tickFormatter: function (v, axis) {
            if (v % 10 == 0) {
                return v + "%";
            } else {
                return "";
            }
        },
        axisLabel: "CPU loading",
        axisLabelUseCanvas: true,
        axisLabelFontSizePixels: 12,
        axisLabelFontFamily: 'Verdana, Arial',
        axisLabelPadding: 6
    },
    legend: {        
        labelBoxBorderColor: "#fff"
    }
};

$(document).ready(function () {
    GetData();

    dataset = [
        { label: "CPU", data: data[0] },
        { label: "CPU2", data: data[1]}
    ];

    $.plot($("#flotcontainer"), dataset, options);

$.plot($("#flotcontainer2"), dataset, options);

    function update() {
        GetData();

        $.plot($("#flotcontainer"), dataset, options)
        $.plot($("#flotcontainer2"), dataset, options)
        setTimeout(update, updateInterval);
    }

    update();
});



</script>

<!-- HTML -->

<h1>MCSLAB</h1>
<div id="flotcontainer"></div>
<div id="flotcontainer2"></div>
